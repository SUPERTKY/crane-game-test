コードを改めて精読して、見た目と物理がズレている原因を整理しました。

---

## ズレの原因（全体像）

爪の「見た目」と「当たり判定」は、**別々の仕組み**で動いています。

| | 見た目（Three.js） | 当たり判定（Cannon-es） |
|---|---|---|
| 構造 | armMesh → clawPivot → clawLPivot → clawLMesh | armBody → clawLBody（shapeのoffsetで位置指定） |
| 位置の決め方 | 親子関係で自動計算（ワールド行列） | `followClawBodies()` で毎フレーム手動コピー |
| 回転 | `clawLPivot.rotation.x` で爪が開閉 | bodyのquaternionにコピーされる |

つまり「見た目の爪メッシュ」と「物理のヒットボックス」は**完全に別物**で、毎フレーム位置を合わせようとしているのですが、以下の理由でズレます。

---

## 原因①：ヒットボックスの基準点が「ピボット」だが、爪メッシュには手動オフセットがある

見た目側では、爪メッシュの位置をこのように**手動補正**しています（loadScene内）：

```js
clawLMesh.position.set(0, -1.95, -0.2);
clawRMesh.position.set(0, -1.85, -0.2);
```

これは「爪モデルの原点がヒンジ位置にないから」の補正ですが、**物理側のヒットボックスにはこの補正が反映されていません。**

物理側の `clawHitboxes` の `offset` は `HB_Y`, `HB_Z1` などの固定値で、ピボットからの相対位置です。しかし見た目の爪メッシュは `clawLMesh.position` で追加のズレを持っているので、**見た目の爪の先端と、ヒットボックスの位置が一致しない**のです。

---

## 原因②：`followClawBodies()` がコピーしているのは「ピボットの姿勢」だけ

```js
clawLPivot.getWorldPosition(tmpPos);
clawLPivot.getWorldQuaternion(tmpQuat);

clawLBody.position.copy(threeVecToCannon(tmpPos));
clawLBody.quaternion.copy(threeQuatToCannon(tmpQuat));
```

ここで `clawLBody` の位置は **clawLPivotのワールド座標** になります。しかし爪メッシュの実際の中心は、そこから `clawLMesh.position`（= `(0, -1.95, -0.2)`）分だけズレた場所にあります。

ヒットボックスの `offset`（`HB_Y = -0.22` など）はピボットからの相対位置として設計されていますが、爪メッシュの補正量（`-1.95`）とは全くスケールが合っていません。

---

## 原因③：スケールの食い違い

見た目と物理でスケールの扱いが異なります：

```js
// 見た目のスケール
clawLMesh.scale.setScalar(WORLD_SCALE * ARM_SCALE * CLAW_SCALE);
// = 0.25 × 2 × 1.5 = 0.75
```

爪メッシュ内の `position.set(0, -1.95, -0.2)` は **スケール適用前のローカル座標** なので、ワールドではこの値に `0.75` が掛かります。

一方、ヒットボックスの `offset` の `HB_Y = -0.22` は**ワールド座標スケールの値**として直接使われています。

つまり：
- 見た目の爪は ピボットから約 `-1.95 × 0.75 ≒ -1.46`（ワールドY）の位置
- ヒットボックスは ピボットから `-0.22`（ワールドY）の位置

**約1.2もYがズレている**ことになります。

---

## 原因④：HB1_ROTの角度がラジアンではなかった（前回修正済み）

前回の修正で `40` → `40 * Math.PI / 180` に直しましたが、元のコードではヒットボックスの回転が約2292度（≒40ラジアン）となっていたため、向きも大きくズレていました。

---

## まとめ：何を直せばズレが解消するか

根本的な解決には、以下の**どちらかのアプローチ**を取る必要があります。

### 方法A：ヒットボックスのoffsetを見た目に合わせる（簡単・おすすめ）

`followClawBodies()` でピボットの位置をコピーした後、ヒットボックスの `offset`（`HB_Y`, `HB_Z1` など）を、**爪メッシュの実際のワールド位置に合うよう再計算**する方法です。

具体的には、`clawLMesh` のワールド中心を基準にして、そこからの相対でヒットボックスを配置します。

### 方法B：followClawBodiesの基準点を爪メッシュに変える（より正確）

現在は `clawLPivot` のワールド座標をコピーしていますが、これを `clawLMesh` のワールド座標に変えて、ヒットボックスのoffsetを爪メッシュ中心からの相対にする方法です。

---

どちらのアプローチで修正を進めましょうか？ 方法Bの方が正確ですが、方法Aの方が今のコード構造を大きく変えずに済みます。
